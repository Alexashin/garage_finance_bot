# GarageLedgerBot

Телеграм‑бот для учёта доходов/расходов небольшого сервиса (например: ремонт и заправка авто‑кондиционеров).

**Стек:** Python 3.12, aiogram v3, PostgreSQL, SQLAlchemy (async), Alembic, Docker / Docker Compose.

## Возможности (MVP)
- Закрытый доступ: в БД есть пользователи с ролями **owner / viewer / worker**.
- Доходы и расходы с категориями.
- Резерв (перевод средств в резерв/из резерва).
- Текущее состояние по кнопке меню: баланс, резерв, доступно.
- Управление пользователями (только owner): добавить/удалить/список.
- Логи действий «работяг»: owner может смотреть операции, которые внес конкретный worker.
- Экспорт отчёта в CSV (все/доходы/расходы, период).

## Быстрый старт
1) Скопируйте `.env.example` в `.env` и заполните значения.

2) Запуск:
```bash
docker compose up -d --build
```

3) Первый владелец (owner) создаётся автоматически при старте, если в БД нет ни одного пользователя.
Он берётся из переменной `OWNER_TELEGRAM_ID`.

## Структура
- `app/` — код бота
- `alembic/` — миграции
- `logs/` — логи (ротация ежедневно, хранение 10 дней)

## Команды
- `/start` — главное меню и текущие балансы
- `/menu` — показать меню

> Проект сделан так, чтобы его было удобно расширять: добавить счета, контрагентов, теги, файлы чеков, интеграцию с 1С/Google Sheets и т.д.
